# WP Site Manager - Abilities Teszt Checklist

## Plugin Management

| Ability | Leírás | docs |
|---------|--------|------|
| `list-plugins` | Pluginok listázása | :white_check_mark: |
| `install-plugin` | Plugin telepítése | :white_check_mark: |
| `activate-plugin` | Plugin aktiválása | :white_check_mark: |
| `deactivate-plugin` | Plugin deaktiválása | :white_check_mark: |
| `delete-plugin` | Plugin törlése | :white_check_mark: |
| `update-plugin` | Plugin frissítése | :white_check_mark: |
| `update-all` | Összes plugin/téma frissítése | :white_check_mark: |

## Theme Management

| Ability | Leírás | docs |
|---------|--------|------|
| `list-themes` | Témák listázása | :white_check_mark: |
| `install-theme` | Téma telepítése | :white_check_mark: |
| `activate-theme` | Téma aktiválása | :white_check_mark: |
| `delete-theme` | Téma törlése | :white_check_mark: |
| `update-theme` | Téma frissítése | :white_check_mark: |

## User Management

| Ability | Leírás | docs |
|---------|--------|------|
| `list-users` | Felhasználók listázása | :white_check_mark: |
| `create-user` | Felhasználó létrehozása | :white_check_mark: |
| `update-user` | Felhasználó módosítása | :white_check_mark: |
| `delete-user` | Felhasználó törlése | :white_check_mark: |
| `get-user` | Egy felhasználó lekérése | :white_check_mark: |
| `get-roles` | Szerepkörök listázása | :white_check_mark: |

## Content Management

### Posts

| Ability | Leírás | docs |
|---------|--------|------|
| `list-posts` | Bejegyzések listázása | :white_check_mark: |
| `create-post` | Bejegyzés létrehozása | :white_check_mark: |
| `update-post` | Bejegyzés módosítása | :white_check_mark: |
| `delete-post` | Bejegyzés törlése | :white_check_mark: |
| `get-post` | Bejegyzés lekérése | :white_check_mark: |
| `restore-post` | Bejegyzés visszaállítása | :white_check_mark: |
| `duplicate-post` | Bejegyzés duplikálása | :white_check_mark: |
| `bulk-posts` | Tömeges műveletek | :white_check_mark: |
| `get-post-types` | Post típusok listázása | :white_check_mark: |

### Pages

| Ability | Leírás | docs |
|---------|--------|------|
| `list-pages` | Oldalak listázása | :white_check_mark: |
| `create-page` | Oldal létrehozása | :white_check_mark: |
| `update-page` | Oldal módosítása | :white_check_mark: |
| `delete-page` | Oldal törlése | :white_check_mark: |
| `get-page` | Oldal lekérése | :white_check_mark: |

### Comments

| Ability | Leírás | docs |
|---------|--------|------|
| `list-comments` | Hozzászólások listázása | :white_check_mark: |
| `create-comment` | Hozzászólás létrehozása | :white_check_mark: |
| `update-comment` | Hozzászólás módosítása | :white_check_mark: |
| `delete-comment` | Hozzászólás törlése | :white_check_mark: |
| `get-comment` | Hozzászólás lekérése | :white_check_mark: |
| `approve-comment` | Hozzászólás jóváhagyása | :white_check_mark: |
| `spam-comment` | Hozzászólás spamnek jelölése | :white_check_mark: |
| `bulk-comments` | Tömeges művelet | :white_check_mark: |
| `comment-counts` | Hozzászólás statisztikák | :white_check_mark: |

### Media

| Ability | Leírás | docs |
|---------|--------|------|
| `list-media` | Média listázása | :white_check_mark: |
| `get-media` | Média lekérése | :white_check_mark: |
| `upload-media` | Média feltöltése URL-ről | :white_check_mark: |
| `update-media` | Média metaadatok módosítása | :white_check_mark: |
| `delete-media` | Média törlése | :white_check_mark: |

### Categories

| Ability | Leírás | docs |
|---------|--------|------|
| `list-categories` | Kategóriák listázása | :white_check_mark: |
| `get-category` | Kategória lekérése | :white_check_mark: |
| `create-category` | Kategória létrehozása | :white_check_mark: |
| `update-category` | Kategória módosítása | :white_check_mark: |
| `delete-category` | Kategória törlése | :white_check_mark: |

### Tags

| Ability | Leírás | docs |
|---------|--------|------|
| `list-tags` | Címkék listázása | :white_check_mark: |
| `get-tag` | Címke lekérése | :white_check_mark: |
| `create-tag` | Címke létrehozása | :white_check_mark: |
| `update-tag` | Címke módosítása | :white_check_mark: |
| `delete-tag` | Címke törlése | :white_check_mark: |

### Meta

| Ability | Leírás | docs |
|---------|--------|------|
| `get-post-meta` | Post meta lekérése | :white_check_mark: |
| `set-post-meta` | Post meta beállítása | :white_check_mark: |
| `delete-post-meta` | Post meta törlése | :white_check_mark: |
| `get-user-meta` | User meta lekérése | :white_check_mark: |
| `set-user-meta` | User meta beállítása | :white_check_mark: |
| `delete-user-meta` | User meta törlése | :white_check_mark: |
| `get-term-meta` | Term meta lekérése | :white_check_mark: |
| `set-term-meta` | Term meta beállítása | :white_check_mark: |
| `delete-term-meta` | Term meta törlése | :white_check_mark: |

### Settings

| Ability | Leírás | docs |
|---------|--------|------|
| `get-general-settings` | Általános beállítások | :white_check_mark: |
| `update-general-settings` | Általános beállítások módosítása | :white_check_mark: |
| `get-writing-settings` | Írás beállítások | :white_check_mark: |
| `update-writing-settings` | Írás beállítások módosítása | :white_check_mark: |
| `get-reading-settings` | Olvasás beállítások | :white_check_mark: |
| `update-reading-settings` | Olvasás beállítások módosítása | :white_check_mark: |
| `get-discussion-settings` | Hozzászólás beállítások | :white_check_mark: |
| `update-discussion-settings` | Hozzászólás beállítások módosítása | :white_check_mark: |
| `get-permalink-settings` | Közvetlen link beállítások | :white_check_mark: |
| `update-permalink-settings` | Közvetlen link beállítások módosítása | :white_check_mark: |

## Maintenance

| Ability | Leírás | docs |
|---------|--------|------|
| `health-check` | Rendszer állapot ellenőrzése | :white_check_mark: |
| `check-updates` | Frissítések ellenőrzése | :white_check_mark: |
| `error-log` | Hibanapló lekérése | :white_check_mark: |
| `list-backups` | Mentések listázása | :white_check_mark: |
| `create-backup` | Mentés indítása | :white_check_mark: |
| `backup-status` | Mentés állapot lekérdezése | :white_check_mark: |
| `cancel-backup` | Futó mentés megszakítása | :white_check_mark: |
| `restore-backup` | Mentés visszaállítása | :white_check_mark: |
| `delete-backup` | Mentés törlése | :white_check_mark: |

## Database

| Ability | Leírás | docs |
|---------|--------|------|
| `optimize-database` | Adatbázis optimalizálás | :white_check_mark: |
| `cleanup-database` | Adatbázis tisztítás | :white_check_mark: |
| `check-plugin-db-updates` | Plugin DB frissítések ellenőrzése | :white_check_mark: |
| `update-plugin-db` | Plugin DB frissítése | :white_check_mark: |
| `update-all-plugin-dbs` | Összes plugin DB frissítése | :white_check_mark: |
| `get-supported-db-plugins` | Támogatott DB pluginok | :white_check_mark: |

## Cache

| Ability | Leírás | docs |
|---------|--------|------|
| `flush-cache` | Cache ürítése | :white_check_mark: |

---

## WooCommerce

> **Megjegyzés:** Ezek az ability-k csak akkor elérhetők, ha a WooCommerce plugin aktív.

### Products

| Ability | Leírás | docs |
|---------|--------|------|
| `wc-list-products` | Termékek listázása | :white_check_mark: |
| `wc-get-product` | Termék lekérése | :white_check_mark: |
| `wc-create-product` | Termék létrehozása | :white_check_mark: |
| `wc-update-product` | Termék módosítása | :white_check_mark: |
| `wc-delete-product` | Termék törlése | :white_check_mark: |
| `wc-duplicate-product` | Termék duplikálása | :white_check_mark: |
| `wc-update-stock` | Készlet frissítése | :white_check_mark: |
| `wc-list-product-categories` | Kategóriák listázása | :white_check_mark: |
| `wc-list-variations` | Variációk listázása | :white_check_mark: |
| `wc-bulk-products` | Tömeges műveletek | :white_check_mark: |

### Orders

| Ability | Leírás | docs |
|---------|--------|------|
| `wc-list-orders` | Rendelések listázása | :white_check_mark: |
| `wc-get-order` | Rendelés lekérése | :white_check_mark: |
| `wc-update-order-status` | Rendelés státusz módosítása | :white_check_mark: |
| `wc-list-order-statuses` | Rendelés státuszok listázása | :white_check_mark: |
| `wc-create-refund` | Visszatérítés létrehozása | :white_check_mark: |
| `wc-list-order-notes` | Rendelés megjegyzések listázása | :white_check_mark: |
| `wc-add-order-note` | Megjegyzés hozzáadása | :white_check_mark: |
| `wc-bulk-orders` | Tömeges státusz módosítás | :white_check_mark: |

### Reports

| Ability | Leírás | docs |
|---------|--------|------|
| `wc-sales-report` | Értékesítési jelentés | :white_check_mark: |
| `wc-top-sellers` | Legnépszerűbb termékek | :white_check_mark: |
| `wc-orders-totals` | Rendelés összesítők | :white_check_mark: |
| `wc-revenue-stats` | Bevételi statisztikák | :white_check_mark: |
| `wc-low-stock-products` | Alacsony készletű termékek | :white_check_mark: |
| `wc-products-totals` | Termék összesítők | :white_check_mark: |

---

## Tesztelési Környezet

| Paraméter | Érték |
|-----------|-------|
| Domain | stanton.hellodevs.dev |
| API Endpoint | /wp-json/wp-abilities/v1/abilities |
| Auth | hellowp-updater / HH2q25LmSQ3ix7zRDpuqJGqq |

## Ismert Javítások

1. **update-all plugin deaktiválás** - `active_plugins` opció visszaállítása frissítés után
2. **update-user meta** - `destructiveMeta` → `writeMeta` (POST method)
3. **delete-user meta** - `idempotent: true` kell a DELETE method-hoz
4. **delete-user id típus** - string → int konverzió szükséges
5. **check-updates force_refresh** - `wp_clean_update_cache()` → `delete_site_transient()` (ne deaktiválja a pluginokat)
6. **input_schema default** - minden object típusú input_schema-nak kell `'default' => []` 
7. **update-comment meta** - `destructiveMeta` → `writeMeta` (POST method, nem DELETE)
8. **CommentManager id cast** - minden id-t használó metódusban `(int)` cast szükséges
9. **bulk-comments output_schema** - `failed_ids` objektum tömb (id + reason), nem integer tömb
10. **get-roles user_count** - `count_users()` hozzáadva a user_count mezőhöz
11. **delete-backup** - ability hozzáadva a MaintenanceAbilitiesRegistrar-hoz
12. **backup rendszer** - background job alapú, chunked feldolgozás (500 fájl/chunk), WP Cron
13. **backup kizárások** - .wpress, .log kiterjesztések, wpsm-backups és cache könyvtárak
14. **backup-status output** - nullable típusok (started_at, completed_at, file_path, stb.)
15. **WooCommerce order amounts** - `(string)` cast szükséges a total, subtotal, stb. mezőknél

## Tesztelési Parancsok

```bash
# GET (readonly)
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/list-plugins/run'

# POST (write)
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" -X POST \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/create-user/run' \
  -H "Content-Type: application/json" \
  -d '{"input":{"username":"test","email":"test@example.com","password":"Test1234!","role":"subscriber"}}'

# DELETE (destructive)
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" -X DELETE \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/delete-user/run' \
  -H "Content-Type: application/json" \
  -d '{"input":{"id":123}}'

# WooCommerce - List products
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/wc-list-products/run'

# WooCommerce - Create product
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" -X POST \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/wc-create-product/run' \
  -H "Content-Type: application/json" \
  -d '{"input":{"name":"Test Product","regular_price":"29.99","status":"publish"}}'

# WooCommerce - Update stock
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" -X POST \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/wc-update-stock/run' \
  -H "Content-Type: application/json" \
  -d '{"input":{"id":101,"quantity":50}}'

# WooCommerce - Update order status
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" -X POST \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/wc-update-order-status/run' \
  -H "Content-Type: application/json" \
  -d '{"input":{"id":102,"status":"processing"}}'

# WooCommerce - Sales report
curl -s -u "hellowp-updater:HH2q25LmSQ3ix7zRDpuqJGqq" \
  'https://stanton.hellodevs.dev/wp-json/wp-abilities/v1/abilities/site-manager/wc-sales-report/run'
```

## Összesítés

| Kategória | Ability-k száma | Tesztelve |
|-----------|-----------------|-----------|
| Plugin Management | 7 | :white_check_mark: |
| Theme Management | 5 | :white_check_mark: |
| User Management | 6 | :white_check_mark: |
| Posts | 9 | :white_check_mark: |
| Pages | 5 | :white_check_mark: |
| Comments | 9 | :white_check_mark: |
| Media | 5 | :white_check_mark: |
| Categories | 5 | :white_check_mark: |
| Tags | 5 | :white_check_mark: |
| Meta | 9 | :white_check_mark: |
| Settings | 10 | :white_check_mark: |
| Maintenance | 9 | :white_check_mark: |
| Database | 6 | :white_check_mark: |
| Cache | 1 | :white_check_mark: |
| **WooCommerce Products** | 10 | :white_check_mark: |
| **WooCommerce Orders** | 8 | :white_check_mark: |
| **WooCommerce Reports** | 6 | :white_check_mark: |
| **Összesen** | **115** | :white_check_mark: |
